<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Liora — Espaço de Estudo</title>
  <meta name="description" content="Liora é um espaço inteligente e tranquilo de estudo guiado, com temas personalizáveis e simulados interativos." />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root {
      --brand:#c44b04;
      --bg:#0b0b0b;
      --fg:#ffffff;
      --card:#151515;
      --muted:#bfbfbf;
      --stroke:#252525;
      --shadow:0 2px 8px rgba(0,0,0,0.4);
    }

    body.light {
      --brand:#f4a261;
      --bg:#faf7f2;
      --fg:#1e1e1e;
      --card:#ffffff;
      --muted:#6b6b6b;
      --stroke:#e0ddd8;
      --shadow:0 2px 10px rgba(0,0,0,0.1);
    }

    html, body {
      height:100%;
      transition: background-color 0.4s ease, color 0.4s ease;
    }

    body {
      background:var(--bg);
      color:var(--fg);
      font-family:'Inter', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", sans-serif;
      line-height:1.7;
      opacity:1;
      transition: opacity 0.4s ease, background-color 0.4s ease, color 0.4s ease;
    }

    body.fading {
      opacity:0;
    }

    .card {
      background:var(--card);
      border:1px solid var(--stroke);
      border-radius:1rem;
      box-shadow:var(--shadow);
      transition:background-color 0.4s ease, box-shadow 0.4s ease, transform 0.3s ease;
    }
    .card:hover { transform:translateY(-2px); box-shadow:0 4px 16px rgba(0,0,0,0.5); }

    .btn {
      background:var(--brand);
      color:#fff;
      border-radius:16px;
      padding:.7rem 1rem;
      font-weight:600;
      transition:background 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
      box-shadow:0 0 6px rgba(196,75,4,0.4);
    }
    .btn:hover { background:#d75b0a; transform:translateY(-1px); box-shadow:0 0 10px rgba(196,75,4,0.6); }

    .chip {
      border:1px solid var(--stroke);
      border-radius:999px;
      padding:.35rem .7rem;
      color:var(--muted);
      transition:background 0.3s ease, color 0.3s ease, transform 0.4s ease;
      display:inline-flex;
      align-items:center;
      justify-content:center;
    }
    .chip:hover { background:var(--brand); color:#fff; }

    #btn-theme {
      font-size:1rem;
      cursor:pointer;
      transform:rotate(0deg);
    }
    #btn-theme.rotate {
      transform:rotate(180deg);
    }

    .dot {
      width:10px; height:10px; border-radius:50%; background:#10b981; display:inline-block; margin-left:.5rem;
    }

    .kbd {
      border:1px solid var(--stroke);
      border-radius:6px;
      padding:2px 6px;
      color:var(--muted);
    }

    input, select {
      background:transparent;
      border:1px solid var(--stroke);
      border-radius:8px;
      padding:.5rem .75rem;
      width:100%;
      color:var(--fg);
      transition:border 0.3s ease, box-shadow 0.3s ease;
    }
    input:focus, select:focus {
      border-color:var(--brand);
      box-shadow:0 0 0 2px rgba(196,75,4,0.3);
      outline:none;
    }

    .section-title { font-weight:600; color:var(--brand); }
    .session-card { background:var(--card); border:1px solid var(--stroke); border-radius:1rem; padding:1rem; box-shadow:var(--shadow); }
  </style>
</head>
<body class="dark">
  <header class="max-w-5xl mx-auto px-4 pt-8">
    <div class="flex items-center justify-between">
      <div class="flex items-center gap-3">
        <div class="w-10 h-10 rounded-2xl flex items-center justify-center text-white font-black" style="background:var(--brand)">Li</div>
        <div>
          <h1 class="text-xl font-bold">Liora — Espaço de Estudo <span class="dot" title="online"></span></h1>
          <p class="text-sm text-[var(--muted)]">Ambiente inteligente e tranquilo para aprender com foco e leveza.</p>
        </div>
      </div>
      <div class="flex items-center gap-2">
        <button id="btn-theme" class="chip" title="Alternar tema">🌙</button>
        <span class="chip">Sessão salva</span>
        <button id="btn-reset" class="chip" title="Limpar estado"><span class="kbd">Reset</span></button>
      </div>
    </div>
  </header>

  <main class="max-w-5xl mx-auto px-4 py-8 grid lg:grid-cols-3 gap-6">
    <section class="lg:col-span-1 card p-5">
      <h2 class="section-title mb-1">Configurar estudo</h2>
      <p class="text-sm text-[var(--muted)] mb-4">Escolha um tema ou envie seu material para criar um plano personalizado com sessões, desafios e simulados.</p>

      <label class="block text-sm font-medium mb-1">Tema</label>
      <input id="inp-tema" type="text" placeholder="Ex.: IA Generativa, História, Biologia" class="mb-3" />

      <div class="text-center my-2 text-xs text-[var(--muted)]">ou</div>

      <label class="block text-sm font-medium mb-1">Upload de material</label>
     <input id="inp-file" type="file"
        accept=".pdf,application/pdf,.txt,application/vnd.openxmlformats-officedocument.wordprocessingml.document,.docx"
        class="text-sm" />
      <p class="text-[11px] text-[var(--muted)] mt-2">Arquivos TXT oferecem melhor resultado neste protótipo.</p>

      <div class="mt-4 grid grid-cols-2 gap-3">
        <div>
          <label class="block text-sm font-medium mb-1">Formato</label>
          <select id="sel-pad">
            <option value="ENEM">ENEM</option>
            <option value="ENAMED">ENAMED</option>
            <option value="OAB">OAB</option>
            <option value="CESPE">CESPE (V/F)</option>
            <option value="GERAL">Geral</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium mb-1">Sessões</label>
          <select id="sel-dias">
            <option>5</option>
            <option>7</option>
            <option>10</option>
          </select>
        </div>
      </div>

      <button id="btn-gerar" class="btn w-full mt-5">Gerar plano</button>
      <p id="status" class="text-xs text-[var(--muted)] mt-2"></p>
    </section>

    <section class="lg:col-span-2 card p-5">
      <div class="flex items-center justify-between mb-3">
        <h2 class="section-title">Seu plano de estudo</h2>
        <div class="text-sm text-[var(--muted)]" id="ctx"></div>
      </div>
      <div id="plano" class="space-y-3"></div>
    </section>
  </main>

  <footer class="max-w-5xl mx-auto px-4 pb-10 text-xs text-[var(--muted)] text-center">
    <p>Liora — um ambiente de estudo guiado e inspirador. © Intellih</p>
  </footer>

  <script>
    // ===== Tema =====
    const themeBtn = document.getElementById('btn-theme');
    const body = document.body;

    function setTheme(mode){
      body.classList.add('fading');
      themeBtn.classList.add('rotate');
      setTimeout(()=>{
        if(mode === 'light'){
          body.classList.add('light');
          localStorage.setItem('liora_theme','light');
          themeBtn.textContent = '☀️';
        } else {
          body.classList.remove('light');
          localStorage.setItem('liora_theme','dark');
          themeBtn.textContent = '🌙';
        }
        setTimeout(()=> {
          body.classList.remove('fading');
          themeBtn.classList.remove('rotate');
        },200);
      },150);
    }

    themeBtn.addEventListener('click',()=>{
      const current = body.classList.contains('light') ? 'light' : 'dark';
      setTheme(current === 'light' ? 'dark' : 'light');
    });

    const savedTheme = localStorage.getItem('liora_theme');
    setTheme(savedTheme || 'dark');

    // ===== Geração dinâmica de sessões =====
    const STATE_KEY = 'liora_study_v2';
    const state = { tema:'', padrao:'ENEM', dias:5, materialTexto:'', plano:[] };

    const $ = id => document.getElementById(id);
    const els = { inpTema:$('inp-tema'), inpFile:$('inp-file'), selPad:$('sel-pad'), selDias:$('sel-dias'), btnGerar:$('btn-gerar'), status:$('status'), ctx:$('ctx'), plano:$('plano') };

    const save = () => localStorage.setItem(STATE_KEY, JSON.stringify(state));
    const load = () => { try { Object.assign(state, JSON.parse(localStorage.getItem(STATE_KEY)) || {}); } catch(e){} };
    load();

    const setStatus = msg => els.status.textContent = msg;
    const updateCtx = () => els.ctx.textContent = `${state.materialTexto ? 'Material enviado' : (state.tema || 'Sem tema')} · Formato: ${state.padrao} · ${state.dias} sessões`;

    function extrairTopicos(texto, tema, n){
      let candidatos = [];
      if(texto){
        const linhas = texto.split(/\n+/).map(s=>s.trim()).filter(Boolean);
        candidatos = linhas.filter(s=>s.split(' ').length<10).slice(0,60);
      }
      if(!candidatos.length){
        candidatos = [`Introdução ao tema ${tema}`, 'Conceitos principais', 'Aplicações práticas', 'Revisão', 'Síntese final'];
      }
      return candidatos.slice(0,n);
    }

    function descrever(topico, tema){
      return `Sessão sobre ${topico}, parte do tema ${tema}. Revisar conceitos e aplicar em exemplos.`;
    }

    function construirPlano(topicos,dias,tema){
      const plano=[];
      for(let i=0;i<dias;i++){
        const t=topicos[i%topicos.length];
        plano.push({dia:i+1,titulo:`Sessão ${i+1}`,topico:t,descricao:descrever(t,tema)});
      }
      return plano;
    }

    function renderPlano(){
      els.plano.innerHTML='';
      if(!state.plano.length){
        els.plano.innerHTML='<p class="text-sm text-[var(--muted)]">Crie um plano de estudo ao lado e ele aparecerá aqui.</p>';
        return;
      }
      state.plano.forEach(p=>{
        const div=document.createElement('div');
        div.className='session-card';
        div.innerHTML=`<div class="text-sm font-semibold mb-1">${p.titulo}</div><div class="text-sm text-[var(--muted)] mb-1">${p.topico}</div><p class="text-sm">${p.descricao}</p>`;
        els.plano.appendChild(div);
      });
    }

    if(els.btnGerar){
      els.btnGerar.addEventListener('click',()=>{
        state.tema=els.inpTema.value.trim();
        state.padrao=els.selPad.value;
        state.dias=parseInt(els.selDias.value,10);
        if(!state.tema && !state.materialTexto){
          alert('Defina um tema ou envie um material.');
          return;
        }
        const topicos=extrairTopicos(state.materialTexto,state.tema,state.dias);
        state.plano=construirPlano(topicos,state.dias,state.tema);
        save();
        updateCtx();
        renderPlano();
        setStatus('Plano criado com sucesso!');
      });
    }

    renderPlano();
    updateCtx();
  </script>
</body>
</html>

